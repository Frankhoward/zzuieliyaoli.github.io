---
layout: post
title:  "今日javascript总结"
date:   2014-12-16 
categories: [javascript-learning]
---


##获得样式
{% highlight ruby %}
var getStyle = function(el, name){
	if (el.name) {
		name = name.replace(/\-(\w)/g, function(all, letter){
			return letter.toUpperCase();
		});
	}
	if (window.getComputedStyle) {
		return el.ownerDocument.getComputedStyle(el, null)[name]; //???
	}else {
		return el.currentStyle[name];
	}
};
{% endhighlight %}

{% highlight ruby %}
var getStyle = function(elem,property) {
  		var value = null;
    	if(elem.style[property]){  
      		return elem.style[property];
      	}
  		else if(elem.currentStyle){ 
    		return elem.currentStyle[property];      
    	} 
  		else if(document.defaultView && document.defaultView.getComputedStyle) {  
    		var property = property.replace(/([A-Z])/g,'-$1').toLowerCase();
    		var computed = document.defaultView.getComputedStyle(elem,'');
    	
    		return computed.getPropertyValue(property);
  		}
		else{  //safari 4,opera 10,chrome 4
			return null;
		}
};

{% endhighlight %}

##二
框架要考虑的东西很多，兼容性，易用性，扩展性

1.样式名要同时支持连字符风格（CSS的标准风格）与驼峰风格（DOM标准风格)；

2.样式名要进行必要的处理，如float样式与CSS3带私有前缀的样式

3.如果框架是仿jQuery风格，要考虑set all get first

4.设置样式时，对于长度宽度可以考虑直接处理数值，由框架智能补上“px”单位

5.设置样式时，对于长度宽度可以考虑传入相对值， 如“-=20”

6.对个别样式的特殊处理，如IE下的`z-index`、`opacity`、`user-select`、`background-postion`、`top`、`left`

7.基于`setStyle`、`getStyle`的扩展，如`height`,`width`,`offset`等方法。     


##三、知识点
// 高级程序设计
P103
1.RegExp 类型来支持正则表达式

2.第一种定义方法（正则表达式字面量）：`var expression = /pattern/ flags;`

`pattern` 部分可以任何简单或复杂的正则表达式，可以包含字符类、限定符、分组、向前查找以及反向引用。

`flags` 一个或多个，用来说明正则表达式的行为。


- g:global 全局，模式即将被应用与所有字符串
- i:表示不区分大小 case-insensitive
- m:表示多行multiline 到达一行文本末尾时还会继续查找下一行中是否存在于模式匹配的项。

3.元字符 `( { [ \ ^ $ | ? * + - . ] } )` 匹配字符串中包含这些字符，就必须进行转义

例:
匹配第一个 `" [bc]at"`, 不区分大小
    `var pattern2 = /\[bc\]at/i;`

4.第二种定义方法（使用RegExp构造函数）：接受两个参数，第一个是要匹配的字符串模式，第二个可选的标志字符串

    var pattern2 = /\[bc\]at/i;
    var pattern2 = new RegExp("[bc]at","i");

5.双重转义

6.P105 ECMAScript3中，第一种适中共享同一个RegExp实例，而第二种创建的每一个新RegExp实例都是一个新实例。
ECMAScript5中明确规定，使用正则表达式字面量必须像直接调用RegExp构造函数一样，每次都创建新的RegExp实例。

7.RegExp实例属性：`global`, `ignoreCase`, `lastIndex`, `multilin`, `source `


- 没多大用，这些信息都保存在模式声明中
- source属性保存的是规范形式的字符串，即，字面量形式所用的字符串。

8.P122 String 类型
1.方法

1.1.访问字符方法 `charAt()` `charCodeAt()`

1.2.字符串拼接 `concat()`

1.3.字符串截断 `slice()` `substr()` `substring()`

1.4.字符串位置方法 `indexOf()` `lastIndexOf()`

1.5.字符串副本 `trim()`

1.6.大小转换 `toLowerCase()` `toUpperCase()`  `toLocaleLowerCase()`  `toLocaleIpperCase()`

1.7.匹配模式 `match()` `search()` `replace() ` 

1.8.分割字符串 `split()`

1.9.比较 l`ocaleCompare()`
